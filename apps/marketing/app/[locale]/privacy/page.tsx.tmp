import { getTranslations } from 'next-intl/server'
import { Header } from '@/components/layout/header'
import { Footer } from '@/components/layout/footer'
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card'
import { BackgroundEngine } from '@/components/backgrounds/BackgroundEngine'
import { backgroundThemes } from '@/lib/backgroundThemes'
import { Shield, Lock, Eye, Database, Mail, FileText } from 'lucide-react'

export async function generateMetadata({ params }: { params: { locale: string } }) {
  const t = await getTranslations({ locale: params.locale, namespace: 'privacy' })

  return {
    title: `${t('title')} Â· Caribbean Azure`,
    description: t('intro'),
  }
}

export default async function PrivacyPage({ params }: { params: { locale: string } }) {
  const t = await getTranslations({ locale: params.locale, namespace: 'privacy' })

  return (
    <>
      <div className="relative">
        {/* 3D Background */}
        <div className="fixed inset-0 -z-10">
          <BackgroundEngine theme={backgroundThemes.legal} />
        </div>

        <Header />
        <main id="main-content">
          {/* Hero Section */}
          <section className="section-padding-y hero-glow">
            <div className="container-custom">
              <div className="mx-auto max-w-4xl text-center">
                <div className="inline-flex items-center gap-3 rounded-full border border-[color:color-mix(in_oklab,var(--brand)_20%,transparent)] bg-[color:color-mix(in_oklab,var(--brand-soft)_40%,transparent)] px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-[color:var(--brand)]">
                  <Shield className="h-4 w-4" />
                  {t('badge')}
                </div>
                <h1 className="mt-8 text-balance text-4xl font-bold tracking-tight md:text-5xl">
                  {t('title')}
                </h1>
                <p className="mt-6 text-lg text-[color:var(--fg-subtle)]">
                  {t('updated')}
                </p>
                <p className="mt-4 text-base text-[color:var(--fg-subtle)]">
                  {t('intro')}
                </p>
              </div>
            </div>
          </section>

          {/* Content Sections */}
          <section className="section-padding-y">
            <div className="container-custom">
              <div className="mx-auto max-w-4xl space-y-8">
                {/* Section 1 */}
                <Card className="rounded-3xl border-[color:color-mix(in_oklab,var(--fg)_12%,transparent)] bg-[color:color-mix(in_oklab,var(--panel)_70%,transparent)] p-8">
                  <CardHeader className="flex flex-row items-start gap-4 pb-6">
                    <div className="flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-xl bg-[color:color-mix(in_oklab,var(--brand-soft)_65%,transparent)] text-[color:var(--brand)]">
                      <FileText className="h-6 w-6" />
                    </div>
                    <div>
                      <CardTitle className="text-2xl">{t('section1.title')}</CardTitle>
                    </div>
                  </CardHeader>
                  <CardContent className="space-y-4 text-sm text-[color:var(--fg-subtle)]">
                    <p dangerouslySetInnerHTML={{ __html: t('section1.controller') }} />
                    <p>{t('section1.text')}</p>
                  </CardContent>
                </Card>

                {/* Section 2 */}
                <Card className="rounded-3xl border-[color:color-mix(in_oklab,var(--fg)_12%,transparent)] bg-[color:color-mix(in_oklab,var(--panel)_70%,transparent)] p-8">
                  <CardHeader className="flex flex-row items-start gap-4 pb-6">
                    <div className="flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-xl bg-[color:color-mix(in_oklab,var(--brand-soft)_65%,transparent)] text-[color:var(--brand)]">
                      <Database className="h-6 w-6" />
                    </div>
                    <div>
                      <CardTitle className="text-2xl">{t('section2.title')}</CardTitle>
                    </div>
                  </CardHeader>
                  <CardContent className="space-y-4 text-sm text-[color:var(--fg-subtle)]">
                    <div>
                      <p className="font-semibold text-body mb-2">{t('section2.viaForms')}</p>
                      <ul className="list-disc list-inside space-y-1 ml-4">
                        {t.raw('section2.viaFormsItems').map((item: string, idx: number) => (
                          <li key={idx}>{item}</li>
                        ))}
                      </ul>
                    </div>
                    <div>
                      <p className="font-semibold text-body mb-2">{t('section2.automatic')}</p>
                      <ul className="list-disc list-inside space-y-1 ml-4">
                        {t.raw('section2.automaticItems').map((item: string, idx: number) => (
                          <li key={idx}>{item}</li>
                        ))}
                      </ul>
                    </div>
                    <p dangerouslySetInnerHTML={{ __html: t('section2.summary') }} />
                  </CardContent>
